<!DOCTYPE html>
<html>
  <style>
#downloadBtn {
  background-color: pink;
  position: absolute;
  top: 90%;
}
  </style>
<body>
  
  <p>
    <button id="genBtn" onclick="newAvatar()">Nuevo Nahuen</button>
  </p>
  <p>
    <button onclick="changeAvatar(0, 'Nahuen')">Nahuen</button>
    <button onclick="changeAvatar(1, 'Emi')">Emi</button>
    <button onclick="changeAvatar(2, 'Goran')">Goran</button>
    <button onclick="changeAvatar(3, 'Tate')">Tate</button>
    <button onclick="changeAvatar(4, 'Ya están en clase?')">Ya están en clase?</button>
    <button onclick="changeAvatar(5, 'Toto')">Toto</button>
    <button onclick="changeAvatar(6, 'Joako')">Joako</button>
    <button onclick="changeAvatar(7, 'Peronchemi')">Peronchemi</button>
  </p>
<!-- <div id ="myContainer"> -->
  <!-- <div id=0 style="width: 170px;height: 170px; position: absolute;"><img id="avatar" name="avatar" src="https://user-images.githubusercontent.com/56173842/116645152-90170080-a94b-11eb-9d26-29c1ae26d83f.png" width="170" height="170"></div> -->
<!-- </div> -->
<button id="downloadBtn" onclick='download("virus.txt","https:\/\/www.jw.org\/es\/")'>María vive cerca tuyo y te habló: Querés que te haga la fiestita? Haceme click y te regalo estos globos</button>

<script>
function changeAvatar(idx, btnName) {
  var avatars = [
    "https://user-images.githubusercontent.com/56173842/116645152-90170080-a94b-11eb-9d26-29c1ae26d83f.png",
    "https://user-images.githubusercontent.com/56173842/116645159-93aa8780-a94b-11eb-8bb3-b99083baba84.png",
    "https://user-images.githubusercontent.com/56173842/116645119-7f668a80-a94b-11eb-8987-ad0352517747.png",
    "https://user-images.githubusercontent.com/56173842/116645139-88eff280-a94b-11eb-8baa-cabcdc36896b.png",
    "https://user-images.githubusercontent.com/56173842/116645146-8beae300-a94b-11eb-9072-4b9d018ae5f3.png",
    "https://user-images.githubusercontent.com/56173842/116645241-bf2d7200-a94b-11eb-9ef0-006b6facc632.png",
    "https://user-images.githubusercontent.com/56173842/116645245-c2c0f900-a94b-11eb-9a5a-8051811f537a.png",
    "https://user-images.githubusercontent.com/56173842/118725943-fc787780-b806-11eb-876f-49ae127b7668.png"
  ]
  var btn = document.getElementById("genBtn");
  btn.innerText = "Nuevo " + btnName
  // var elem = document.getElementById("avatar");
  var elems = document.getElementsByName("avatar");
  elems.forEach(element => {
    element.src = avatars[idx];
  });
}
all_avatars = 0
x_inc = []
y_inc = []
function myMove(elemId, id) {
  var elem = document.getElementById(elemId);
  var pos_x = 0;
  var pos_y = 0;
  clearInterval(id);
  id = setInterval(frame, 0.1);
  function frame() {
    // increment = 1
    if (pos_x <= 0) {
        x_inc[elem.id] = 2 + Math.random();
    }
    if (pos_y <= 0) {
        y_inc[elem.id] = 1 + Math.random();
    }

    if (pos_x >= window.innerWidth - 170) {
        x_inc[elem.id] = -1 - Math.random();
    }
    if (pos_y >= window.innerHeight - 170) {
        y_inc[elem.id] = -2 - Math.random();
    }

    pos_x+=x_inc[elem.id];
    pos_y+=y_inc[elem.id];
    elem.style.top = pos_y + 'px';
    elem.style.left = pos_x + 'px';
  }
}
function newAvatar() {
  var img = document.getElementById("avatar");
  if (img == null) {
    img = document.createElement("IMG")
    img.id = "avatar";
    img.name = "avatar";
    img.src = "https://user-images.githubusercontent.com/56173842/116645152-90170080-a94b-11eb-9d26-29c1ae26d83f.png";
    img.width = 170;
    img.height = 170;
  }
  // var elem = document.getElementById("myAnimation");
  var someId = null;
  var dv = document.createElement("DIV");
  dv.id = all_avatars;
  // dv.innerHTML = '<img id="avatar" name="avatar" src="https://user-images.githubusercontent.com/56173842/116645152-90170080-a94b-11eb-9d26-29c1ae26d83f.png" width="170" height="170"></div>';
  dv.innerHTML = '<img id="avatar" name="avatar" src="' + img.src + '" width="170" height="170">';
  dv.style.width = "170px";
  dv.style.height = "170px";
  dv.style.position = "absolute";
  all_avatars += 1
  x_inc[dv.id] = 2 + Math.random()
  y_inc[dv.id] = 1 + Math.random()
  document.body.appendChild(dv);
  myMove(dv.id, someId);
}

// var rootId = null;
newAvatar();

function download(filename, text) {
  var element = document.createElement('a');
  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
  element.setAttribute('download', filename);

  element.style.display = 'none';
  document.body.appendChild(element);

  element.click();

  document.body.removeChild(element);
}

</script>

</body>

</html>
